"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[590],{1590:function(e,t,r){r.r(t),r.d(t,{default:function(){return V}});var s=r(1413),n=r(5671),o=r(3144),i=r(136),a=r(3668),l=r(2791),c=r(885),u="Profile_descriptionBlock__yFCVo",d="Profile_labelStyle__CuEzW",h="Profile_userPhoto__QOIsI",p=r(7842),f=r(4494),x="ProfileStatus_ProfileStatusContainer__CIbD+",m=r(184),j=function(e){var t=(0,l.useState)(!1),r=(0,c.Z)(t,2),s=r[0],n=r[1],o=(0,l.useState)(e.status),i=(0,c.Z)(o,2),a=i[0],u=i[1];(0,l.useEffect)((function(){u(e.status)}),[e.status]);return(0,m.jsxs)("div",{className:x,children:[!s&&(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Status:"})," ",(0,m.jsx)("span",{onDoubleClick:function(){n(!0)},children:e.status||"No status"})]}),s&&(0,m.jsx)("div",{children:(0,m.jsx)("input",{onChange:function(e){u(e.currentTarget.value)},autoFocus:!0,onBlur:function(){n(!1),e.updateStatus(a)},value:a})})]})},v="Contact_contact__Z6RP-",b=function(e){var t=e.contactTitle,r=e.contactValue;return(0,m.jsxs)("div",{className:v,children:[(0,m.jsx)("b",{children:t}),": ",r]})},g=r(9373),Z=r(2177),_=function(e){var t=(0,Z.v9)((function(e){return e.auth.login}));return(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{children:"Description"}),e.isOwner&&t&&(0,m.jsx)("div",{children:(0,m.jsx)(g.Z,{variant:"contained",size:"small",onClick:e.goToEditMode,children:"edit"})}),(0,m.jsxs)("div",{style:{paddingTop:"20px"},children:[(0,m.jsx)("b",{children:"Name"}),": ",e.profile.fullName]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Looking for a job"}),": ",e.profile.lookingForAJob?"Yes":"No"]}),e.profile.lookingForAJob&&(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"My professional skills"}),": ",e.profile.lookingForAJobDescription]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Abut me"}),": ",e.profile.aboutMe]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Contacts"}),": ",Object.keys(e.profile.contacts).map((function(t){return(0,m.jsx)(b,{contactTitle:t,contactValue:e.profile.contacts[t]},t)}))]})]})},k=r(3083),w=r(5705),A=r(7364),z=r(132),y=function(e){var t=(0,A.T)(),r=e.profile.contacts,s=(0,w.TA)({initialValues:{userId:e.profile.userId,lookingForAJob:e.profile.lookingForAJob,lookingForAJobDescription:e.profile.lookingForAJobDescription,fullName:e.profile.fullName,aboutMe:e.profile.aboutMe,contacts:{github:r.github,vk:r.vk,facebook:r.facebook,instagram:r.instagram,twitter:r.twitter,website:r.website,youtube:r.youtube,mainLink:r.mainLink}},onSubmit:function(r){t((0,k.Ii)(r)),e.goToEditModeHandler()},validationSchema:z.Ry({lookingForAJobDescription:z.Z_().min(10,"Must be 10 characters or less").required("Required"),fullName:z.Z_().min(3,"Must be 3 characters or less").required("Required"),aboutMe:z.Z_().min(10,"Must be 10 characters or less").required("Required"),contacts:z.Ry().shape({github:z.Z_().nullable().matches(/((https?):\/\/)?(www.)?[a-z0-9]+(\.[a-z]{2,}){1,3}(#?\/?[a-zA-Z0-9#]+)*\/?(\?[a-zA-Z0-9-_]+=[a-zA-Z0-9-%]+&?)?$/,"Enter correct url!"),vk:z.Z_().nullable().matches(/((https?):\/\/)?(www.)?[a-z0-9]+(\.[a-z]{2,}){1,3}(#?\/?[a-zA-Z0-9#]+)*\/?(\?[a-zA-Z0-9-_]+=[a-zA-Z0-9-%]+&?)?$/,"Enter correct url!"),facebook:z.Z_().nullable().matches(/((https?):\/\/)?(www.)?[a-z0-9]+(\.[a-z]{2,}){1,3}(#?\/?[a-zA-Z0-9#]+)*\/?(\?[a-zA-Z0-9-_]+=[a-zA-Z0-9-%]+&?)?$/,"Enter correct url!"),instagram:z.Z_().nullable().matches(/((https?):\/\/)?(www.)?[a-z0-9]+(\.[a-z]{2,}){1,3}(#?\/?[a-zA-Z0-9#]+)*\/?(\?[a-zA-Z0-9-_]+=[a-zA-Z0-9-%]+&?)?$/,"Enter correct url!"),twitter:z.Z_().nullable().matches(/((https?):\/\/)?(www.)?[a-z0-9]+(\.[a-z]{2,}){1,3}(#?\/?[a-zA-Z0-9#]+)*\/?(\?[a-zA-Z0-9-_]+=[a-zA-Z0-9-%]+&?)?$/,"Enter correct url!"),website:z.Z_().nullable().matches(/((https?):\/\/)?(www.)?[a-z0-9]+(\.[a-z]{2,}){1,3}(#?\/?[a-zA-Z0-9#]+)*\/?(\?[a-zA-Z0-9-_]+=[a-zA-Z0-9-%]+&?)?$/,"Enter correct url!"),youtube:z.Z_().nullable().matches(/((https?):\/\/)?(www.)?[a-z0-9]+(\.[a-z]{2,}){1,3}(#?\/?[a-zA-Z0-9#]+)*\/?(\?[a-zA-Z0-9-_]+=[a-zA-Z0-9-%]+&?)?$/,"Enter correct url!"),mainLink:z.Z_().nullable().matches(/((https?):\/\/)?(www.)?[a-z0-9]+(\.[a-z]{2,}){1,3}(#?\/?[a-zA-Z0-9#]+)*\/?(\?[a-zA-Z0-9-_]+=[a-zA-Z0-9-%]+&?)?$/,"Enter correct url!")})})});return(0,m.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,m.jsx)("div",{children:(0,m.jsx)(g.Z,{variant:"contained",size:"small",type:"submit",children:"SAVE"})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Full Name: "}),(0,m.jsxs)("div",{children:[(0,m.jsx)("input",{type:"text",name:"fullName",placeholder:"Enter full name",onChange:s.handleChange,value:s.values.fullName}),s.touched.fullName&&s.errors.fullName&&(0,m.jsx)("div",{style:{color:"red",opacity:"0.8"},children:s.errors.fullName})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Looking for a job: "}),(0,m.jsx)("div",{children:(0,m.jsx)("input",{type:"checkbox",name:"lookingForAJob",onChange:s.handleChange,checked:s.values.lookingForAJob})})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"My professional skills: "}),(0,m.jsxs)("div",{children:[(0,m.jsx)("textarea",{name:"lookingForAJobDescription",placeholder:"Enter you description",onChange:s.handleChange,value:s.values.lookingForAJobDescription}),s.touched.lookingForAJobDescription&&s.errors.lookingForAJobDescription&&(0,m.jsx)("div",{style:{color:"red",opacity:"0.8"},children:s.errors.lookingForAJobDescription})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Abut me: "}),(0,m.jsxs)("div",{children:[(0,m.jsx)("textarea",{name:"aboutMe",placeholder:"Enter you information",onChange:s.handleChange,value:s.values.aboutMe}),s.touched.aboutMe&&s.errors.aboutMe&&(0,m.jsx)("div",{style:{color:"red",opacity:"0.8"},children:s.errors.aboutMe})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Contacts: "}),Object.keys(e.profile.contacts).map((function(e){var t,r,n=null===(t=s.touched.contacts)||void 0===t?void 0:t[e],o=null===(r=s.errors.contacts)||void 0===r?void 0:r[e];return(0,m.jsxs)("div",{children:[(0,m.jsxs)("b",{children:[e,": "]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("input",{type:"text",name:"contacts."+e,placeholder:e,onChange:s.handleChange,value:s.values.contacts[e]}),n&&o?(0,m.jsx)("div",{style:{color:"red",opacity:"0.8"},children:o}):null]})]},e)}))]})]})},P=function(e){var t=(0,l.useState)(!1),r=(0,c.Z)(t,2),s=r[0],n=r[1],o=(0,Z.v9)((function(e){return e.auth.login}));if(!Object.keys(e.profile).length)return(0,m.jsx)(p.p,{});var i=function(){n(!s)};return(0,m.jsx)("div",{children:e.profile?(0,m.jsxs)("div",{className:u,children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("img",{src:e.profile.photos.large||f,className:h,alt:"user photo"}),e.isOwner&&o&&(0,m.jsx)("div",{children:(0,m.jsxs)("label",{className:d,children:[(0,m.jsx)("input",{type:"file",onChange:function(t){t.currentTarget.files&&t.currentTarget.files.length&&e.savePhoto(t.currentTarget.files[0])},style:{display:"none"}}),"Upload photo"]})}),(0,m.jsx)(j,{status:e.status,updateStatus:e.updateStatus})]}),s?(0,m.jsx)(y,{profile:e.profile,goToEditModeHandler:i}):(0,m.jsx)(_,{profile:e.profile,isOwner:e.isOwner,goToEditMode:i}),(0,m.jsx)("div",{})]}):(0,m.jsx)(p.p,{})})},C=r(2982),S="Post_item__w-Wlx",N=function(e){return(0,m.jsxs)("div",{className:S,children:[(0,m.jsx)("img",{src:"https://avatars.mds.yandex.net/i?id=0b973180b7366be0209323d646ec2992-5875897-images-thumbs&n=13"}),e.message,(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{children:"like"}),e.likeCount]})]})},M="MyPosts_postBlock__m-rKh",F="MyPosts_posts__Dis3A",E=r(6139),T=r(2099),D=r(8779),J=r(5717),I=(0,D.D)(15);var O=(0,T.Z)({form:"ProfileAddNewPostForm"})((function(e){return(0,m.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,m.jsx)("div",{children:(0,m.jsx)(E.Z,{name:"newPostText",component:J.gx,placeholder:"Post message",validate:[D.C,I]})}),(0,m.jsx)("div",{children:(0,m.jsx)("button",{children:"add post"})}),(0,m.jsx)("div",{children:(0,m.jsx)("button",{children:"post remove"})})]})})),$=(0,Z.$j)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText,title:"My posts"}}),(function(e){return{addPost:function(t){e((0,k.Pi)(t))}}}))((function(e){var t=(0,Z.v9)((function(e){return e.auth.login})),r=(0,C.Z)(e.posts).reverse().map((function(e){return(0,m.jsx)(N,{message:e.message,likeCount:e.likeCount},e.id)}));return(0,m.jsx)("div",{className:M,children:t&&(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{children:e.title}),(0,m.jsx)(O,{onSubmit:function(t){e.addPost(t.newPostText)}}),(0,m.jsx)("div",{className:F,children:r})]})})})),q=l.memo((function(e){return(0,m.jsxs)("div",{children:[(0,m.jsx)(P,{profile:e.profile,status:e.status,updateStatus:e.updateStatus,isOwner:e.isOwner,savePhoto:e.savePhoto}),(0,m.jsx)($,{})]})})),R=r(9723),U=r(7781),L=function(e){(0,i.Z)(r,e);var t=(0,a.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,o.Z)(r,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=String(this.props.logUserId)),this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,r){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,m.jsx)(q,(0,s.Z)((0,s.Z)({},this.props),{},{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto}))}}]),r}(l.Component),V=(0,U.qC)((0,Z.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,logUserId:e.auth.id,isAuth:e.auth.isAuth}}),{getUserProfile:k.et,getStatus:k.lR,updateStatus:k.Nf,savePhoto:k.Ju}),R.EN)(L)},5717:function(e,t,r){r.d(t,{gx:function(){return d}});var s=r(1413),n=r(5987),o=(r(2791),"FormControl_formControl__wwlWx"),i="FormControl_error__YuTS4",a=r(184),l=["input","meta","children"],c=["input","meta"],u=function(e){e.input;var t=e.meta,r=e.children,s=((0,n.Z)(e,l),t.touched&&t.error);return(0,a.jsxs)("div",{className:o+" "+(s?i:""),children:[(0,a.jsx)("div",{children:r}),s&&(0,a.jsx)("span",{children:t.error})]})},d=function(e){var t=e.input,r=e.meta,o=(0,n.Z)(e,c);return(0,a.jsx)(u,{input:t,meta:r,children:(0,a.jsx)("textarea",(0,s.Z)((0,s.Z)({},t),o))})}},8779:function(e,t,r){r.d(t,{C:function(){return s},D:function(){return n}});var s=function(e){if(!e)return"Field is required"},n=function(e){return function(t){if(t&&t.length>e)return"Max length is ".concat(e," symbols")}}}}]);
//# sourceMappingURL=590.09192dce.chunk.js.map