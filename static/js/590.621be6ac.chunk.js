"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[590],{1590:function(e,t,s){s.r(t),s.d(t,{default:function(){return O}});var r=s(1413),o=s(5671),i=s(3144),n=s(136),a=s(3668),l=s(2791),c=s(885),u="Profile_descriptionBlock__yFCVo",d="Profile_labelStyle__CuEzW",h="Profile_userPhoto__QOIsI",p=s(7842),f=s(4494),x="ProfileStatus_ProfileStatusContainer__CIbD+",v=s(184),j=function(e){var t=(0,l.useState)(!1),s=(0,c.Z)(t,2),r=s[0],o=s[1],i=(0,l.useState)(e.status),n=(0,c.Z)(i,2),a=n[0],u=n[1];(0,l.useEffect)((function(){u(e.status)}),[e.status]);return(0,v.jsxs)("div",{className:x,children:[!r&&(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Status:"})," ",(0,v.jsx)("span",{onDoubleClick:function(){o(!0)},children:e.status||"No status"})]}),r&&(0,v.jsx)("div",{children:(0,v.jsx)("input",{onChange:function(e){u(e.currentTarget.value)},autoFocus:!0,onBlur:function(){o(!1),e.updateStatus(a)},value:a})})]})},m="Contact_contact__Z6RP-",b=function(e){var t=e.contactTitle,s=e.contactValue;return(0,v.jsxs)("div",{className:m,children:[(0,v.jsx)("b",{children:t}),": ",s]})},g=s(9373),w=s(2177),Z=function(e){var t=(0,w.v9)((function(e){return e.auth.login}));return(0,v.jsxs)("div",{children:[(0,v.jsx)("h3",{children:"Description"}),e.isOwner&&t&&(0,v.jsx)("div",{children:(0,v.jsx)(g.Z,{variant:"contained",size:"small",onClick:e.goToEditMode,children:"edit"})}),(0,v.jsxs)("div",{style:{paddingTop:"20px"},children:[(0,v.jsx)("b",{children:"Name"}),": ",e.profile.fullName]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Looking for a job"}),": ",e.profile.lookingForAJob?"Yes":"No"]}),e.profile.lookingForAJob&&(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"My professional skills"}),": ",e.profile.lookingForAJobDescription]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Abut me"}),": ",e.profile.aboutMe]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Contacts"}),": ",Object.keys(e.profile.contacts).map((function(t){return(0,v.jsx)(b,{contactTitle:t,contactValue:e.profile.contacts[t]},t)}))]})]})},k=s(3083),A=s(5705),y=s(7364),_=s(132),z=function(e){var t=(0,y.T)(),s=e.profile.contacts,r=(0,A.TA)({initialValues:{userId:e.profile.userId,lookingForAJob:e.profile.lookingForAJob,lookingForAJobDescription:e.profile.lookingForAJobDescription,fullName:e.profile.fullName,aboutMe:e.profile.aboutMe,contacts:{github:s.github,vk:s.vk,facebook:s.facebook,instagram:s.instagram,twitter:s.twitter,website:s.website,youtube:s.youtube,mainLink:s.mainLink}},onSubmit:function(s){t((0,k.Ii)(s)),e.goToEditModeHandler()},validationSchema:_.Ry({lookingForAJobDescription:_.Z_().min(10,"Must be 10 characters or less").required("Required"),fullName:_.Z_().min(3,"Must be 3 characters or less").required("Required"),aboutMe:_.Z_().min(10,"Must be 10 characters or less").required("Required"),contacts:_.Ry().shape({github:_.Z_().nullable().matches(/((https?):\/\/)?(www.)?[a-z0-9]+(\.[a-z]{2,}){1,3}(#?\/?[a-zA-Z0-9#]+)*\/?(\?[a-zA-Z0-9-_]+=[a-zA-Z0-9-%]+&?)?$/,"Enter correct url!"),vk:_.Z_().nullable().matches(/((https?):\/\/)?(www.)?[a-z0-9]+(\.[a-z]{2,}){1,3}(#?\/?[a-zA-Z0-9#]+)*\/?(\?[a-zA-Z0-9-_]+=[a-zA-Z0-9-%]+&?)?$/,"Enter correct url!"),facebook:_.Z_().nullable().matches(/((https?):\/\/)?(www.)?[a-z0-9]+(\.[a-z]{2,}){1,3}(#?\/?[a-zA-Z0-9#]+)*\/?(\?[a-zA-Z0-9-_]+=[a-zA-Z0-9-%]+&?)?$/,"Enter correct url!"),instagram:_.Z_().nullable().matches(/((https?):\/\/)?(www.)?[a-z0-9]+(\.[a-z]{2,}){1,3}(#?\/?[a-zA-Z0-9#]+)*\/?(\?[a-zA-Z0-9-_]+=[a-zA-Z0-9-%]+&?)?$/,"Enter correct url!"),twitter:_.Z_().nullable().matches(/((https?):\/\/)?(www.)?[a-z0-9]+(\.[a-z]{2,}){1,3}(#?\/?[a-zA-Z0-9#]+)*\/?(\?[a-zA-Z0-9-_]+=[a-zA-Z0-9-%]+&?)?$/,"Enter correct url!"),website:_.Z_().nullable().matches(/((https?):\/\/)?(www.)?[a-z0-9]+(\.[a-z]{2,}){1,3}(#?\/?[a-zA-Z0-9#]+)*\/?(\?[a-zA-Z0-9-_]+=[a-zA-Z0-9-%]+&?)?$/,"Enter correct url!"),youtube:_.Z_().nullable().matches(/((https?):\/\/)?(www.)?[a-z0-9]+(\.[a-z]{2,}){1,3}(#?\/?[a-zA-Z0-9#]+)*\/?(\?[a-zA-Z0-9-_]+=[a-zA-Z0-9-%]+&?)?$/,"Enter correct url!"),mainLink:_.Z_().nullable().matches(/((https?):\/\/)?(www.)?[a-z0-9]+(\.[a-z]{2,}){1,3}(#?\/?[a-zA-Z0-9#]+)*\/?(\?[a-zA-Z0-9-_]+=[a-zA-Z0-9-%]+&?)?$/,"Enter correct url!")})})});return(0,v.jsxs)("form",{onSubmit:r.handleSubmit,children:[(0,v.jsx)("div",{children:(0,v.jsx)(g.Z,{variant:"contained",size:"small",type:"submit",children:"SAVE"})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Full Name: "}),(0,v.jsxs)("div",{children:[(0,v.jsx)("input",{type:"text",name:"fullName",placeholder:"Enter full name",onChange:r.handleChange,value:r.values.fullName}),r.touched.fullName&&r.errors.fullName&&(0,v.jsx)("div",{style:{color:"red",opacity:"0.8"},children:r.errors.fullName})]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Looking for a job: "}),(0,v.jsx)("div",{children:(0,v.jsx)("input",{type:"checkbox",name:"lookingForAJob",onChange:r.handleChange,checked:r.values.lookingForAJob})})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"My professional skills: "}),(0,v.jsxs)("div",{children:[(0,v.jsx)("textarea",{name:"lookingForAJobDescription",placeholder:"Enter you description",onChange:r.handleChange,value:r.values.lookingForAJobDescription}),r.touched.lookingForAJobDescription&&r.errors.lookingForAJobDescription&&(0,v.jsx)("div",{style:{color:"red",opacity:"0.8"},children:r.errors.lookingForAJobDescription})]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Abut me: "}),(0,v.jsxs)("div",{children:[(0,v.jsx)("textarea",{name:"aboutMe",placeholder:"Enter you information",onChange:r.handleChange,value:r.values.aboutMe}),r.touched.aboutMe&&r.errors.aboutMe&&(0,v.jsx)("div",{style:{color:"red",opacity:"0.8"},children:r.errors.aboutMe})]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Contacts: "}),Object.keys(e.profile.contacts).map((function(e){var t,s,o=null===(t=r.touched.contacts)||void 0===t?void 0:t[e],i=null===(s=r.errors.contacts)||void 0===s?void 0:s[e];return(0,v.jsxs)("div",{children:[(0,v.jsxs)("b",{children:[e,": "]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("input",{type:"text",name:"contacts."+e,placeholder:e,onChange:r.handleChange,value:r.values.contacts[e]}),o&&i?(0,v.jsx)("div",{style:{color:"red",opacity:"0.8"},children:i}):null]})]},e)}))]})]})},P=function(e){var t=(0,l.useState)(!1),s=(0,c.Z)(t,2),r=s[0],o=s[1],i=(0,w.v9)((function(e){return e.auth.login}));if(!Object.keys(e.profile).length)return(0,v.jsx)(p.p,{});var n=function(){o(!r)};return(0,v.jsx)("div",{children:e.profile?(0,v.jsxs)("div",{className:u,children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("img",{src:e.profile.photos.large||f,className:h,alt:"user photo"}),e.isOwner&&i&&(0,v.jsx)("div",{children:(0,v.jsxs)("label",{className:d,children:[(0,v.jsx)("input",{type:"file",onChange:function(t){t.currentTarget.files&&t.currentTarget.files.length&&e.savePhoto(t.currentTarget.files[0])},style:{display:"none"}}),"Upload photo"]})}),(0,v.jsx)(j,{status:e.status,updateStatus:e.updateStatus})]}),r?(0,v.jsx)(z,{profile:e.profile,goToEditModeHandler:n}):(0,v.jsx)(Z,{profile:e.profile,isOwner:e.isOwner,goToEditMode:n}),(0,v.jsx)("div",{})]}):(0,v.jsx)(p.p,{})})},C=s(2982),S="Post_item__w-Wlx",T=function(e){var t=(0,y.T)();return(0,v.jsxs)("div",{className:S,children:[(0,v.jsx)("img",{src:"https://avatars.mds.yandex.net/i?id=0b973180b7366be0209323d646ec2992-5875897-images-thumbs&n=13",alt:"user avatar"}),e.message,(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{children:(0,v.jsx)(g.Z,{variant:"contained",size:"small",color:"warning",onClick:function(){t((0,k.Uc)(e.postId))},children:"REMOVE POST"})}),(0,v.jsx)("span",{children:"like"}),e.likeCount]})]})},M="MyPosts_postBlock__m-rKh",N="MyPosts_posts__Dis3A",E=(0,w.$j)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText,title:"My posts"}}),(function(e){return{addPost:function(t){e((0,k.Pi)(t))},removePost:function(t){e((0,k.Uc)(t))}}}))((function(e){var t=(0,w.v9)((function(e){return e.auth.login})),s=(0,C.Z)(e.posts).reverse().map((function(e){return(0,v.jsx)("div",{children:(0,v.jsx)(T,{message:e.message,likeCount:e.likeCount,postId:e.id})},e.id)})),r=(0,A.TA)({initialValues:{newPostText:"",postId:""},onSubmit:function(t){!function(t){e.addPost(t.newPostText)}(t),r.resetForm()},validationSchema:_.Ry({newPostText:_.Z_().max(40,"Must be 40 characters or less")})});return(0,v.jsx)("div",{className:M,children:t&&(0,v.jsx)("div",{children:(0,v.jsxs)("form",{onSubmit:r.handleSubmit,children:[(0,v.jsx)("h3",{children:e.title}),(0,v.jsxs)("div",{children:[(0,v.jsx)("textarea",{name:"newPostText",placeholder:"Enter you post",onChange:r.handleChange,value:r.values.newPostText}),r.touched.newPostText&&r.errors.newPostText&&(0,v.jsx)("div",{style:{color:"red",opacity:"0.8"},children:r.errors.newPostText}),(0,v.jsx)("div",{children:(0,v.jsx)(g.Z,{variant:"contained",size:"small",type:"submit",children:"ADD POST"})})]}),(0,v.jsx)("div",{className:N,children:s})]})})})})),F=l.memo((function(e){return(0,v.jsxs)("div",{children:[(0,v.jsx)(P,{profile:e.profile,status:e.status,updateStatus:e.updateStatus,isOwner:e.isOwner,savePhoto:e.savePhoto}),(0,v.jsx)(E,{})]})})),D=s(9723),J=s(7781),I=function(e){(0,n.Z)(s,e);var t=(0,a.Z)(s);function s(){return(0,o.Z)(this,s),t.apply(this,arguments)}return(0,i.Z)(s,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=String(this.props.logUserId)),this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,s){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,v.jsx)(F,(0,r.Z)((0,r.Z)({},this.props),{},{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto}))}}]),s}(l.Component),O=(0,J.qC)((0,w.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,logUserId:e.auth.id,isAuth:e.auth.isAuth}}),{getUserProfile:k.et,getStatus:k.lR,updateStatus:k.Nf,savePhoto:k.Ju}),D.EN)(I)}}]);
//# sourceMappingURL=590.621be6ac.chunk.js.map